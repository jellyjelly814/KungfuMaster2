[README.md](https://github.com/user-attachments/files/24377079/README.md)
# 🎮 KungfuMaster - 武侠江湖

![Game Logo](data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚔️</text></svg>)

**一款解压好玩的2D俯视卡通风割草游戏**，玩家扮演武僧通过旋转武器消灭不断逼近的怪物，坚持20分钟通关，体验不断成长与割草的快感。

---

## 🎯 游戏特色

### 核心玩法
- **极简操作**：使用方向键或 WASD 控制武僧移动
- **自动攻击**：武器自动旋转攻击，无需复杂操作
- **割草快感**：看着武器旋转消灭大波怪物，减压首选
- **成长体验**：升级解锁新武器，旋转速度越来越快

### 游戏内容
- **10个关卡**：每关2分钟，共20分钟紧张刺激的游戏体验
- **4种怪物**：哥布林、蝙蝠、骷髅、妖怪，特性各异
- **3个酒馆**：固定位置分布，可购买茅台恢复生命
- **自动系统**：自动升级、自动购买，专注战斗体验

### 美术风格
- 卡通可爱风格
- 精美像素/卡通图形
- 流畅动画效果
- 沉浸式背景音乐

---

## 🚀 快速开始

### 环境要求
- Node.js 14+ (用于本地服务器)
- 现代浏览器 (Chrome, Firefox, Safari, Edge)

### 安装运行

1. **克隆项目** (如果是从仓库获取)
```bash
git clone <repository-url>
cd KungfuMaster-main
```

2. **安装依赖** (可选，如果需要本地服务器)
```bash
npm install
```

3. **启动游戏**

方式一：使用 Node.js 服务器
```bash
node server.js
# 然后在浏览器访问 http://localhost:3000
```

方式二：直接打开 HTML 文件
```bash
# 直接在浏览器中打开 index.html 文件
# 注意：某些浏览器可能会限制本地文件的模块加载
```

4. **开始游戏**
- 点击"开始游戏"按钮
- 使用方向键或 WASD 移动武僧
- 武器会自动旋转攻击周围的怪物
- 坚持20分钟即可通关！

---

## 🎮 游戏操作

### 键盘控制
| 按键 | 功能 |
|------|------|
| ↑ / W | 向上移动 |
| ↓ / S | 向下移动 |
| ← / A | 向左移动 |
| → / D | 向右移动 |
| ESC | 暂停游戏 (待实现) |

### 游戏目标
- **胜利条件**：在10个关卡中坚持20分钟不被怪物击杀
- **失败条件**：生命值归零则游戏结束
- **升级方式**：击杀怪物获得经验，经验达标自动升级
- **消费方式**：靠近酒馆时自动购买茅台（需满足条件）

---

## 📁 项目结构

```
KungfuMaster-main/
├── 🎨 资源文件
│   ├── css/
│   │   └── style.css          # 游戏样式文件
│   ├── image/
│   │   ├── 背景.jpg           # 游戏背景图
│   │   ├── 武僧.png           # 玩家角色图片
│   │   ├── 短剑.png           # 武器图片
│   │   ├── 怪物1.png          # 怪物图片
│   │   ├── 怪物2.png          # 怪物图片
│   │   ├── 怪物3.png          # 怪物图片
│   │   ├── 怪物4.png          # 怪物图片
│   │   ├── 酒馆.png           # 酒馆图片
│   │   ├── 茅台.png           # 商品图片
│   │   └── boss.png           # Boss图片 (彩蛋)
│   ├── 剑气横空.mp3           # 背景音乐
│   └── server.js              # Node.js 服务器
│
├── 📜 HTML 文件
│   └── index.html             # 游戏主页面
│
├── ⚙️ 核心逻辑
│   └── js/
│       ├── main.js            # 游戏入口文件
│       │
│       ├── 🕹️ 游戏模块 (game/)
│       │   ├── Game.js           # 游戏主控制器
│       │   ├── Player.js         # 玩家系统
│       │   ├── Weapon.js         # 武器系统
│       │   ├── Monster.js        # 怪物系统
│       │   ├── Tavern.js         # 酒馆系统
│       │   ├── UIManager.js      # UI管理系统
│       │   ├── GoldDrop.js       # 金币掉落系统
│       │   ├── BossEasterEgg.js  # Boss彩蛋系统
│       │   └── MaotaiPurchase.js # 茅台购买系统
│       │
│       └── 🛠️ 工具模块 (utils/)
│           ├── GameConfig.js     # 游戏配置常量
│           ├── ImageManager.js   # 图片资源管理
│           └── Utils.js          # 通用工具函数
│
└── 📚 文档
    ├── README.md              # 本说明文件
    ├── PRD.md                 # 产品需求文档
    ├── update_prd.py          # PRD更新脚本
    └── fix_prd.py             # PRD修复脚本
```

---

## 🏗️ 技术架构

### 前端技术
| 层级 | 技术选择 | 说明 |
|------|---------|------|
| **渲染引擎** | HTML5 Canvas + 原生JS | 轻量级、跨平台、性能足够 |
| **框架** | 原生 JavaScript (ES6+) | 游戏逻辑简单，无需框架开销 |
| **样式** | CSS3 | 现代化样式设计 |
| **构建** | 原生 ES Modules | 无需复杂构建工具 |

### 后端技术
| 层级 | 技术选择 | 说明 |
|------|---------|------|
| **运行环境** | Node.js | 与前端同语言，开发效率高 |
| **框架** | Express.js | 轻量级 Web 服务器 |
| **架构模式** | 同机运行 | 简单场景，避免网络延迟 |

### 核心系统
- **游戏循环**：60fps 固定帧率，delta time 时间步长
- **碰撞检测**：圆形碰撞检测算法
- **对象管理**：玩家、武器、怪物、酒馆独立系统
- **状态管理**：单数据源 (Single Source of Truth)

---

## 🎯 游戏系统详解

### 玩家系统
- **初始生命值**：100/100
- **移动速度**：适中，手动控制
- **初始等级**：1级
- **初始金币**：0
- **初始武器**：5把

### 武器系统
- **武器类型**：短剑
- **旋转方式**：顺时针自动旋转
- **初始数量**：5把
- **最大数量**：12把
- **伤害数值**：10点/次
- **升级效果**：每级旋转速度+5%，每2级解锁1把新剑

### 怪物系统
| 怪物类型 | 血量 | 速度 | 伤害 | 特点 |
|---------|------|------|------|------|
| 哥布林 | 12 | 170px/s | 8 | 普通敌人，数量最多 |
| 蝙蝠 | 10 | 180px/s | 8 | 速度快，难追击 |
| 骷髅 | 25 | 160px/s | 8 | 血厚但移动中等 |
| 妖怪 | 15 | 190px/s | 10 | 速度最快，伤害最高 |

### 升级系统
- **经验获取**：击杀怪物获得1经验
- **经验需求**：每级递增2只怪 (1级→2级: 10只，2级→3级: 12只...)
- **升级效果**：
  - 旋转速度 +5%
  - 每2级解锁1把新武器
  - 自动触发，无需手动选择

### 经济系统
- **金币获取**：击杀怪物掉落1-5金币
- **金币消费**：仅限当局使用
- **茅台价格**：50金币
- **茅台效果**：恢复50点血量
- **购买条件**：金币≥50 且 血量<50

### 关卡系统
- **总关卡数**：10关
- **每关时长**：2分钟
- **总游戏时长**：20分钟
- **难度设计**：每关怪物生成率递增

---

## 🎨 界面说明

### HUD 元素 (游戏内显示)
- 🩸 **血条**：顶部中央，100点满值
- 💰 **金币数**：左上角显示当前金币
- ⚔️ **武器数量**：当前武器数量 (X/12)
- 📊 **等级**：当前等级 (Lv.X)
- 💀 **杀怪数**：累计击杀数量
- ⏱️ **游戏时间**：当前关卡剩余时间
- 📍 **关卡进度**：第 X 关 / 共 10 关

### 游戏界面
- **开始界面**：游戏标题、操作说明、开始按钮
- **游戏界面**：游戏画布、HUD信息、酒馆显示
- **结束界面**：游戏统计数据、重新开始按钮
- **通关界面**：通关祝贺、统计数据、再玩一次按钮

---

## 🔧 开发相关

### 安装开发环境
```bash
# 安装 Node.js (如果未安装)
# 推荐使用 nvm 管理 Node.js 版本

# 克隆项目
git clone <repository-url>
cd KungfuMaster-main

# 安装依赖
npm install
```

### 启动开发服务器
```bash
# 方式一：使用 npm
npm start

# 方式二：直接运行
node server.js

# 方式三：使用 nodemon (热重载)
npx nodemon server.js
```

### 修改游戏配置
游戏配置位于 `js/utils/GameConfig.js` 文件中，可以调整：

```javascript
const GAME_CONFIG = {
  // 游戏设置
  TOTAL_STAGES: 10,              // 总关卡数
  STAGE_DURATION: 120,           // 每关时长(秒)
  
  // 玩家设置
  PLAYER: {
    START_HP: 100,               // 初始血量
    MAX_HP: 100,                 // 最大血量
    START_WEAPONS: 5,            // 初始武器数
    MAX_WEAPONS: 12,             // 最大武器数
    START_ROTATION_SPEED: 0.5,   // 初始旋转速度(圈/秒)
    SPEED_INCREASE_PER_LEVEL: 0.05, // 每级速度加成
  },
  
  // 怪物设置
  MONSTERS: {
    GOBLIN: { HP: 10, SPEED: 1.5 },
    BAT: { HP: 8, SPEED: 3.0 },
    SKELETON: { HP: 20, SPEED: 2.0 },
  },
  
  // 经济设置
  ECONOMY: {
    MAOTAI_PRICE: 50,            // 茅台价格
    MAOTAI_HEAL: 50,             // 茅台恢复量
    HEAL_THRESHOLD: 50,          // 购买门槛(血量<50)
  },
};
```

### 添加新功能
1. 在 `js/game/` 目录下创建新的模块文件
2. 在 `Game.js` 中初始化和更新新系统
3. 如需 UI，在 `UIManager.js` 中添加相应方法
4. 在 `main.js` 中导入并使用

---

## 📝 版本历史

### v1.0 (2025-12-23)
- ✅ 基础游戏循环
- ✅ 玩家移动控制
- ✅ 武器旋转系统
- ✅ 怪物生成与追踪
- ✅ 碰撞检测与战斗
- ✅ 升级系统
- ✅ 酒馆购买系统
- ✅ UI显示系统
- ✅ 游戏胜利/失败判定

---

## 🤝 贡献指南

欢迎贡献代码！请遵循以下步骤：

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

---

## 📄 许可证

本项目仅供学习和个人使用，未经授权不得用于商业用途。

---

## 🙏 致谢

- 感谢所有测试玩家
- 参考游戏：吸血鬼幸存者、土豆兄弟、黎明前20分钟
- 背景音乐：剑气横空

---

## 📧 联系方式

如有问题或建议，请通过以下方式联系：
- 项目仓库：[GitHub Repository]
- 问题反馈：[Issue Tracker]

---

**祝您游戏愉快！⚔️🗡️**

*坚持20分钟，成为武林高手！*

